(()=>{const e=document.getElementById("localOption"),t=document.getElementById("urlOption"),n=document.getElementById("pasteOption"),o=document.getElementById("localInput"),c=document.getElementById("urlInput"),l=document.getElementById("pasteInput");document.getElementById("processLocalFile").addEventListener("click",function(){const e=document.getElementById("localFile").files[0];if(!e)return f("Please select a file.");if(!e.name.endsWith(".mobileconfig"))return f("Only .mobileconfig files are supported.");const t=new FileReader;t.onload=()=>r(t.result,"uploaded-profile.mobileconfig"),t.readAsText(e)}),document.getElementById("processUrl").addEventListener("click",a),document.getElementById("processXml").addEventListener("click",s),document.getElementById("hideModal").addEventListener("click",()=>document.getElementById("browserModal").classList.add("hidden"));let i="https://raw.githubusercontent.com/rohit-chouhan/mobile-config-installer/main/sample.mobileconfig";function d(e){[o,c,l].forEach(e=>e.classList.add("hidden")),e.classList.remove("hidden")}async function a(){const e=document.getElementById("fileUrl").value.trim();if(!e)return f("Enter a valid URL.");try{const t=await fetch(e);if(!t.ok)return f("Failed to fetch file.");r(await t.text(),"url-profile.mobileconfig")}catch{f("Error fetching the file.")}}function s(){const e=document.getElementById("xmlCode").value.trim();if(!e)return f("Paste valid XML code.");r(e,"pasted-profile.mobileconfig")}function r(e,t){const n=new Blob([e],{type:"application/x-apple-aspen-config"}),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download=t,o.click(),u("Profile ready. If on iOS, Safari will prompt installation.")}function m(e,{type:t="info",duration:n=3e3}={}){const o={info:"ℹ️",success:"✅",error:"⚠️"};let c=document.querySelector(".toast-container");c||(c=document.createElement("div"),c.className="toast-container",document.body.appendChild(c));const l=document.createElement("div");l.className=`toast ${t}`,l.setAttribute("role","status"),l.setAttribute("aria-live","polite"),l.innerHTML=`\n      <span class="icon">${o[t]||o.info}</span>\n      <div class="msg">${e}</div>\n      <button class="close" aria-label="Close">&times;</button>\n    `;const i=()=>{l.classList.contains("hide")||(l.classList.add("hide"),l.addEventListener("animationend",()=>l.remove(),{once:!0}))};return l.querySelector(".close").addEventListener("click",i),c.appendChild(l),n>0&&setTimeout(i,n),l}document.getElementById("trySampleUrl").addEventListener("click",()=>{document.getElementById("fileUrl").value=i,a()}),document.getElementById("trySampleCode").addEventListener("click",()=>{fetch(i).then(e=>e.text()).then(e=>{document.getElementById("xmlCode").value=e,s()}).catch(()=>f("Error fetching sample code."))}),document.getElementById("trySampleFile").addEventListener("click",()=>{const e=new Blob([i],{type:"application/x-apple-aspen-config"}),t=document.createElement("a");t.href=URL.createObjectURL(e),t.download="sample.mobileconfig",t.click(),u("Sample file downloaded. Check your downloads folder.")}),e.onclick=()=>d(o),t.onclick=()=>d(c),n.onclick=()=>d(l);const u=(e,t)=>m(e,{type:"success",...t||{}}),f=(e,t)=>m(e,{type:"error",...t||{}});!function(){const e=navigator.userAgent;/^((?!chrome|crios|android|edg|firefox|fxios|samsungbrowser).)*safari/i.test(e)||document.getElementById("browserModal")?.classList.remove("hidden")}()})();