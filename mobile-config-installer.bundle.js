(()=>{const e=document.getElementById("localOption"),t=document.getElementById("urlOption"),n=document.getElementById("pasteOption"),o=document.getElementById("localInput"),l=document.getElementById("urlInput"),i=document.getElementById("pasteInput");function c(e){[o,l,i].forEach(e=>e.classList.add("hidden")),e.classList.remove("hidden")}function d(e,t){const n=new Blob([e],{type:"application/x-apple-aspen-config"}),o=document.createElement("a");o.href=URL.createObjectURL(n),o.download=t,o.click(),a("Profile ready. If on iOS, Safari will prompt installation.")}function a(e){alert(e)}document.getElementById("processLocalFile").addEventListener("click",function(){const e=document.getElementById("localFile").files[0];if(!e)return a("Please select a file.");if(!e.name.endsWith(".mobileconfig"))return a("Only .mobileconfig files are supported.");const t=new FileReader;t.onload=()=>d(t.result,"uploaded-profile.mobileconfig"),t.readAsText(e)}),document.getElementById("processUrl").addEventListener("click",async function(){const e=document.getElementById("fileUrl").value.trim();if(!e)return a("Enter a valid URL.");try{const t=await fetch(e);if(!t.ok)return a("Failed to fetch file.");d(await t.text(),"url-profile.mobileconfig")}catch{a("Error fetching the file.")}}),document.getElementById("processXml").addEventListener("click",function(){const e=document.getElementById("xmlCode").value.trim();if(!e)return a("Paste valid XML code.");d(e,"pasted-profile.mobileconfig")}),document.getElementById("hideModal").addEventListener("click",()=>document.getElementById("browserModal").classList.add("hidden")),e.onclick=()=>c(o),t.onclick=()=>c(l),n.onclick=()=>c(i),function(){const e=navigator.userAgent;/^((?!chrome|android).)*safari/i.test(e)||document.getElementById("browserModal").classList.remove("hidden")}()})();